<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
  </head>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <body>
  <div style="margin-bottom: 20px;">
  <a href="/add_book"><button>Add Book</button></a>
  <a href="/add_author"><button>Add Author</button></a>
</div>

   {% with messages = get_flashed_messages() %}
  {% if messages %}
    <ul>
      {% for message in messages %}
        <li style="color: green;">{{ message }}</li>
      {% endfor %}
    </ul>
  {% endif %}
{% endwith %}

  <form method="get" action="/">
  <label for="search">🔎 Search:</label>
  <input type="text" id="search" name="search" placeholder="search title" value="{{ request.args.get('search', '') }}">
  <button type="submit">Suchen</button>
</form>

  <form method="get" action="/">
  <label for="sort_by">📍Sort by:</label>
  <select name="sort" id="sort_by" onchange="this.form.submit()">
    <option value="">-- Auswahl --</option>
    <option value="title_asc">Title A-Z</option>
    <option value="title_desc">Title Z-A</option>
    <option value="author_asc">Author A-Z</option>
    <option value="author_desc">Author Z-A</option>
  </select>
</form>

    {% for book in books %}
     <div>
    <h3>{{ book.title }}</h3>
    <p>Autor: {{ book.author.name }}</p>
         <form action="/book/{{ book.id }}/delete" method="post" style="display: inline;">
  <button type="submit" onclick="return confirm('Do you really want to delete this Book?')">🗑️ Entfernen</button>
</form>
    {% if book.isbn %}
      <img src="https://covers.openlibrary.org/b/isbn/{{ book.isbn }}-M.jpg" alt="Cover für {{ book.title }}">
    {% else %}
      <p>Kein Cover verfügbar</p>
    {% endif %}

  </div>
    {% endfor %}

  </body>
</html>